<title>Login</title>
<h1>Inicia sesi√≥n</h1>
<div class="contenedor-login">
  <div class="formulario-login">
    <form [formGroup]="formularioLogin" (ngSubmit)="login()">
      <!-- Email -->
      <input type="text" formControlName="mail" placeholder="Email" />
      <div *ngIf="formularioLogin.get('mail')?.invalid && formularioLogin.get('mail')?.touched">
        <small *ngIf="formularioLogin.get('mail')?.errors?.['required']">‚ö† Debes ingresar un email.</small>
        <small *ngIf="formularioLogin.get('mail')?.errors?.['email']">‚ö† El formato del email es incorrecto.</small>
      </div>

      <!-- Contrase√±a -->
      <input type="password" formControlName="password" placeholder="Password" />
      <div *ngIf="formularioLogin.get('password')?.invalid && formularioLogin.get('password')?.touched">
        <small *ngIf="formularioLogin.get('password')?.errors?.['required']">‚ö† Debes ingresar una contrase√±a.</small>
        <small *ngIf="formularioLogin.get('password')?.errors?.['minlength']">‚ö† La contrase√±a debe tener al menos 6 caracteres.</small>
      </div>

      <!-- Bot√≥n Iniciar Sesion-->
      <button class="btn btn-success" type="submit" [disabled]="formularioLogin.invalid || isLoading">Iniciar sesi√≥n</button>
      <!-- Accesos r√°pidos -->
      <div *ngIf="isLoadingUsuarios" class="overlay">
        <div class="spinner"></div>
        <p>Cargando...</p>
      </div>
      <div *ngIf="!isLoadingUsuarios">
        <div *ngFor="let paciente of pacientes; let i = index">
          <button class="btn btn-outline-primary quick-btn" (click)="quickAccess(paciente)">
            <img [src]="paciente.imagen_perfil" alt="Foto de {{ paciente.nombre }}" class="profile-img" />
            Acceso r√°pido a paciente {{ i + 1 }}
          </button>
        </div>       
        <div *ngFor="let especialista of especialistas; let i = index">
          <button class="btn btn-outline-primary quick-btn" (click)="quickAccess(especialista)">
            <img [src]="especialista.imagen_perfil" alt="Foto de {{ especialista.nombre }}" class="profile-img" />
            Acceso r√°pido a especialista {{ i + 1 }}
          </button>
        </div>       
        <div *ngIf="administrador">
          <button class="btn btn-outline-primary" (click)="quickAccess(administrador)">
            <img [src]="administrador.imagen_perfil" alt="Foto de {{ administrador.nombre }}" class="profile-img" />
            Acceso r√°pido administrador
          </button>
        </div>    
      </div>
    </form>
    <!-- Error -->
    <div class="error-msg">{{ errorMessage }}</div>
  </div>
</div>

<!-- üîπ Overlay que bloquea la p√°gina mientras `isLoading` est√° activo -->
<div *ngIf="isLoading" class="overlay">
  <div class="spinner"></div>
  <p>Iniciando sesion...</p>
</div>