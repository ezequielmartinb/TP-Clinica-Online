<title>Sección usuarios</title>
<h1>Listado de usuarios</h1>
<div *ngIf="cargando" class="spinner-container">
  <div class="spinner"></div>
  <p>Cargando datos...</p>
</div> 
<div class="d-flex gap-2 mb-3 align-items-center" *ngIf="!cargando">
  <label for="campo">Buscar por:</label>
  <select [(ngModel)]="campoSeleccionado" id="campo" class="form-select w-auto">
    <option *ngFor="let campo of camposDisponibles" [value]="campo.clave">
      {{ campo.etiqueta }}
    </option>
  </select>

  <input type="text" [(ngModel)]="filtro" class="form-control" placeholder="Escribí para filtrar..." />
</div>
<div class="table-responsive" *ngIf="!cargando">
    <table>         
        <thead>
          <tr>
            <th>Apellido</th>
            <th>Nombre</th>
            <th>Edad</th>
            <th>DNI</th>
            <th>Email</th>
            <th>Aprobado</th>
            <th>Foto de perfil</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let usuario of usuarios | filtro: filtro : campoSeleccionado | ordenar" [appDirectivaColorRol]="obtenerTipoClase(usuario)">
            <td>{{ usuario.apellido }}</td>
            <td>{{ usuario.nombre }}</td>
            <td>{{ usuario.edad }}</td>
            <td>{{ usuario.dni | dni}}</td>
            <td>{{ usuario.mail }}</td>
            <td>
                <button 
                  [ngClass]="usuario.aprobado ? 'btn-habilitado' : 'btn-deshabilitado'">
                  {{ usuario.aprobado ? 'Habilitado' : 'No habilitado' }}
                </button>
              </td>              
            <td>
              <img *ngIf="usuario.imagen_perfil" [src]="usuario.imagen_perfil" 
                    alt="Foto de {{ usuario.nombre }}" 
                    appDirectivaZoomFotos class="img-perfil">
            </td>      
          </tr>
        </tbody>
    </table>
</div>