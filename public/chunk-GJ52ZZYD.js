import{a as Q,c as X,g as Y,l as ee,m as te,n as ie,p as ne}from"./chunk-DDJUIS55.js";import{$a as N,Aa as f,Ab as J,Bb as L,Ca as v,Ia as c,Ka as n,La as o,Ma as F,Pa as V,Qa as Z,Ra as d,Sa as q,V as O,W as I,Wa as s,Xa as u,Ya as R,Za as U,_a as T,bb as y,cb as B,db as W,ea as b,na as j,pa as l,rb as $,sa as C,sb as z,ta as m,tb as K,vb as G,xa as H,za as h}from"./chunk-QWSCER6P.js";import{a as _,f as D}from"./chunk-PZ5UXJ7I.js";var S=class t{constructor(i,e){this.el=i;this.renderer=e}onMouseEnter(){this.renderer.setStyle(this.el.nativeElement,"transform","scale(1.5)"),this.renderer.setStyle(this.el.nativeElement,"transition","transform 0.3s")}onMouseLeave(){this.renderer.setStyle(this.el.nativeElement,"transform","scale(1)")}static \u0275fac=function(e){return new(e||t)(m(b),m(C))};static \u0275dir=h({type:t,selectors:[["","appDirectivaZoomFotos",""]],hostBindings:function(e,r){e&1&&Z("mouseenter",function(){return r.onMouseEnter()})("mouseleave",function(){return r.onMouseLeave()})}})};var E=class t{constructor(i,e){this.el=i;this.renderer=e}rol;ngOnInit(){this.rol==="paciente"?this.renderer.setStyle(this.el.nativeElement,"background-color","#ADD8E6"):this.rol==="especialista"?this.renderer.setStyle(this.el.nativeElement,"background-color","#FFB6C1"):this.renderer.setStyle(this.el.nativeElement,"background-color","yellow")}static \u0275fac=function(e){return new(e||t)(m(b),m(C))};static \u0275dir=h({type:t,selectors:[["","appDirectivaColorRol",""]],inputs:{rol:[0,"appDirectivaColorRol","rol"]}})};var M=class t{transform(i){let e=i.toString().replace(/\D/g,""),r=e.length===8,a=r?e:e.padStart(7,"0");return r?a.replace(/(\d{2})(\d{3})(\d{3})/,"$1.$2.$3"):a.replace(/(\d{1})(\d{3})(\d{3})/,"$1.$2.$3")}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=f({name:"dni",type:t,pure:!0})};var P=class t{transform(i,e,r){return!i||!e||!r?i:i.filter(a=>a[r]?.toString().toLowerCase().includes(e.toLowerCase()))}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=f({name:"filtro",type:t,pure:!0})};var w=class t{transform(i){return i?i.slice().sort((e,r)=>{let a=e.apellido?.toLowerCase()||"",p=r.apellido?.toLowerCase()||"";return a.localeCompare(p)}):[]}static \u0275fac=function(e){return new(e||t)};static \u0275pipe=f({name:"ordenar",type:t,pure:!0})};function re(t,i){t&1&&(n(0,"div",3),F(1,"div",4),n(2,"p"),s(3,"Cargando datos..."),o()())}function ae(t,i){if(t&1&&(n(0,"option",10),s(1),o()),t&2){let e=i.$implicit;c("value",e.clave),l(),R(" ",e.etiqueta," ")}}function se(t,i){if(t&1){let e=V();n(0,"div",5)(1,"label",6),s(2,"Buscar por:"),o(),n(3,"select",7),N("ngModelChange",function(a){O(e);let p=d();return T(p.campoSeleccionado,a)||(p.campoSeleccionado=a),I(a)}),v(4,ae,2,2,"option",8),o(),n(5,"input",9),N("ngModelChange",function(a){O(e);let p=d();return T(p.filtro,a)||(p.filtro=a),I(a)}),o()()}if(t&2){let e=d();l(3),U("ngModel",e.campoSeleccionado),l(),c("ngForOf",e.camposDisponibles),l(),U("ngModel",e.filtro)}}function le(t,i){if(t&1&&F(0,"img",16),t&2){let e=d().$implicit;q("alt","Foto de ",e.nombre,""),c("src",e.imagen_perfil,j)}}function ce(t,i){if(t&1&&(n(0,"tr",13)(1,"td"),s(2),o(),n(3,"td"),s(4),o(),n(5,"td"),s(6),o(),n(7,"td"),s(8),y(9,"dni"),o(),n(10,"td"),s(11),o(),n(12,"td")(13,"button",14),s(14),o()(),n(15,"td"),v(16,le,1,3,"img",15),o()()),t&2){let e=i.$implicit,r=d(2);c("appDirectivaColorRol",r.obtenerTipoClase(e)),l(2),u(e.apellido),l(2),u(e.nombre),l(2),u(e.edad),l(2),u(B(9,9,e.dni)),l(3),u(e.mail),l(2),c("ngClass",e.aprobado?"btn-habilitado":"btn-deshabilitado"),l(),R(" ",e.aprobado?"Habilitado":"No habilitado"," "),l(2),c("ngIf",e.imagen_perfil)}}function pe(t,i){if(t&1&&(n(0,"div",11)(1,"table")(2,"thead")(3,"tr")(4,"th"),s(5,"Apellido"),o(),n(6,"th"),s(7,"Nombre"),o(),n(8,"th"),s(9,"Edad"),o(),n(10,"th"),s(11,"DNI"),o(),n(12,"th"),s(13,"Email"),o(),n(14,"th"),s(15,"Aprobado"),o(),n(16,"th"),s(17,"Foto de perfil"),o()()(),n(18,"tbody"),v(19,ce,17,11,"tr",12),y(20,"filtro"),y(21,"ordenar"),o()()()),t&2){let e=d();l(19),c("ngForOf",B(21,5,W(20,1,e.usuarios,e.filtro,e.campoSeleccionado)))}}var k=J(L.apiUrl,L.publicAnonKey),oe=class t{usuarios=[];cargando=!0;filtro="";campoSeleccionado="nombre";camposDisponibles=[{clave:"nombre",etiqueta:"Nombre"},{clave:"apellido",etiqueta:"Apellido"},{clave:"mail",etiqueta:"Mail"},{clave:"dni",etiqueta:"DNI"}];ngOnInit(){return D(this,null,function*(){this.usuarios=yield this.obtenerUsuarios(),this.cargando=!1})}obtenerUsuarios(){return D(this,null,function*(){let{data:i,error:e}=yield k.from("pacientes").select("*"),{data:r,error:a}=yield k.from("especialistas").select("*"),{data:p,error:A}=yield k.from("administradores").select("*");return e||a||A?(console.error("Error obteniendo datos:",e||a||A),[]):[...i.map(g=>_({},g)),...r.map(g=>_({},g)),...p.map(g=>_({},g))]})}obtenerTipoClase(i){return"obra_social"in i?"paciente":"especialidad"in i?"especialista":"es_admin"in i||i.rol==="admin"?"administrador":"Desconocido"}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=H({type:t,selectors:[["app-seccion-usuarios"]],decls:7,vars:3,consts:[["class","spinner-container",4,"ngIf"],["class","d-flex gap-2 mb-3 align-items-center",4,"ngIf"],["class","table-responsive",4,"ngIf"],[1,"spinner-container"],[1,"spinner"],[1,"d-flex","gap-2","mb-3","align-items-center"],["for","campo"],["id","campo",1,"form-select","w-auto",3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["type","text","placeholder","Escrib\xED para filtrar...",1,"form-control",3,"ngModelChange","ngModel"],[3,"value"],[1,"table-responsive"],[3,"appDirectivaColorRol",4,"ngFor","ngForOf"],[3,"appDirectivaColorRol"],[3,"ngClass"],["appDirectivaZoomFotos","","class","img-perfil",3,"src","alt",4,"ngIf"],["appDirectivaZoomFotos","",1,"img-perfil",3,"src","alt"]],template:function(e,r){e&1&&(n(0,"title"),s(1,"Secci\xF3n usuarios"),o(),n(2,"h1"),s(3,"Listado de usuarios"),o(),v(4,re,4,0,"div",0)(5,se,6,3,"div",1)(6,pe,22,7,"div",2)),e&2&&(l(4),c("ngIf",r.cargando),l(),c("ngIf",!r.cargando),l(),c("ngIf",!r.cargando))},dependencies:[ne,te,ie,Q,ee,X,Y,G,$,z,K,S,E,M,P,w],styles:[".table-responsive[_ngcontent-%COMP%]{overflow-x:auto;max-width:100%}table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:20px 0;font-size:16px;text-align:left;background:#fff;box-shadow:0 4px 8px #0000001a;border-radius:8px;overflow:hidden}th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{padding:12px;border-bottom:1px solid #ddd}th[_ngcontent-%COMP%]{background-color:#007bff;color:#fff;font-weight:700;text-transform:uppercase}tr[_ngcontent-%COMP%]:hover{background-color:#f8f9fa}img[_ngcontent-%COMP%]{border-radius:50%;width:40px;height:40px;object-fit:cover}@media (max-width: 768px){th[_ngcontent-%COMP%], td[_ngcontent-%COMP%]{font-size:14px;padding:8px}}.btn-habilitado[_ngcontent-%COMP%]{background-color:#28a745;color:#fff;border:none;padding:8px 12px;border-radius:5px;cursor:pointer}.btn-deshabilitado[_ngcontent-%COMP%]{background-color:#dc3545;color:#fff;border:none;padding:8px 12px;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{opacity:.8}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px;text-align:center}.spinner-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px;width:100%;text-align:center;position:relative;flex-direction:column}.spinner[_ngcontent-%COMP%]{border:4px solid rgba(0,0,0,.1);border-left-color:#007bff;width:40px;height:40px;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite;margin-right:10px}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}p[_ngcontent-%COMP%]{font-size:18px;font-weight:700;margin:0}.table-responsive[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;position:relative}"]})};export{oe as SeccionUsuariosComponent};
